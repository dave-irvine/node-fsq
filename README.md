fsq [![Build Status](https://secure.travis-ci.org/dave-irvine/node-fsq.png)](http://travis-ci.org/dave-irvine/node-fsq) [![NPM version](https://badge.fury.io/js/fsq.png)](http://badge.fury.io/js/fsq)
===

*Node.js FS with Q.js*

Installation
============

```
npm install fsq
```

Discussion
==========

####What?

This module takes Node.js (v0.10.x) FS module, promisify's all its functions using Q.js, and gives them back to you. It also queues all your requests to avoid the EMFILE error.

####Why?

I like Promises.

####Anything else?

Well yes, seeing as you asked. You can quite often run into the EMFILE error whereby you have too many file descriptors open. The "fix" is usually to allow more file descriptors, but that seems to be just delaying the inevitable.

Since we are doing asynchronous IO anyway, it shouldn't really matter if we take a slightly more pragmatic approach and queue up our FS requests when we start hitting the EMFILE limit.

[graceful-fs](https://github.com/isaacs/node-graceful-fs) does this, but I think it only queues ```open()``` and ```readdir()```, and doesn't use Promises. I like Promises.

API
---

In terms of parameters, all the asynchronous Node.js FS functions are reproduced as-is, according to the [documentation](http://nodejs.org/docs/v0.10.21/api/fs.html) at time of writing.

The exceptions here are that the ```callback``` parameter should not be passed (it will be ignored), and all functions return a ```Promise```, which, as it is generated by [Q](https://github.com/kriskowal/q), will only supply one value when resolved. This value will be an Object, with its keys matching the names of the return parameters for the associated FS functions.

#####fsq.readFile(filename, [options])
See [fs.readFile](http://nodejs.org/docs/v0.10.21/api/fs.html#fs_fs_readfile_filename_options_callback) for parameter details.

Promise resolves with ```Array```:

* data (```String``` if encoding is specified in options, otherwise ```Buffer```)

#####fsq.writeFile(filename, data, [options])
See [fs.writeFile](http://nodejs.org/docs/v0.10.21/api/fs.html#fs_fs_writefile_filename_data_options_callback) for parameter details.

Promise resolves with ```undefined```.

#####fsq.exists(path)
See [fs.exists](http://nodejs.org/api/fs.html#fs_fs_exists_path_callback) for parameter details.

Promise resolves with ```Array```:

* exists (```Boolean```)

Examples
--------

######writeFile example.

```
var fsq = require("fsq");

fsq.writeFile("world.json", "Hello").then(
	function () {
		console.log("writeFile success!");
	},
	function (err) {
		console.log("writeFile error: " + err);
	}
);
```
